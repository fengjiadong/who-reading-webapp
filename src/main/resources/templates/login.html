<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="UTF-8"/>
	<title>Hello</title>
	<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="/css/css.css">

	<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
	<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
	<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
	<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<!--<script src="/js/bootstrapValidator.js"></script>-->
	<!--<script src="/js/zh_CN.js"></script>-->
</head>
<body>

<!--<div th:text="${#httpServletRequest.getRequestURL() +'?'+ #httpServletRequest.getQueryString() }"></div>-->
<!--<div th:text="${#httpServletRequest.requestURL +'?'+ #httpServletRequest.queryString }"></div>-->
<!--<span th:text="${key}"></span>-->
<div class="container">
	<div class="row">
		<form action="" id="login">
			<div class="col-lg-12">
				<div class="col-lg-4 col-lg-offset-4">
					<h1>Who Dynamic modeling system</h1>
					<div class="form-group">
						<label for="userName">账号</label>
						<input type="text" class="form-control" id="userName" minlength="6" required
							   placeholder="账号/手机号/Email">
					</div>

					<div class="form-group">

						<label for="password">密码</label>
						<input type="password" class="form-control" id="password" required onerror="" minlength="6"
							   placeholder="6位数以上的密码">
					</div>
					<p class="error" id="errorMsg">密码错误</p>
					<div class="checkbox">
						<label>
							<input type="checkbox">记住密码
						</label>
					</div>
					<input type="submit" id="submit"  class="btn btn-default" value="登录" data-loading-text="登录中" autocomplete="off"  >
				</div>
			</div>
		</form>
	</div>
</div>

<!--模态框-->
<!-- 模态框（Modal） -->
<!--<div class="modal fade bs-example-modal-sm" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">-->
	<!--<div class="modal-dialog modal-sm">-->
		<!--<div class="modal-content">-->
			<!--<div class="modal-header">-->
				<!--<button type="button" class="close" data-dismiss="modal"-->
						<!--aria-hidden="true">×-->
				<!--</button>-->
					<!--<p>消息提醒</p>-->
			<!--</div>-->
			<!--<div class="modal-body">-->
				<!--<p id="msg">提示信息</p>-->
			<!--</div>-->
		<!--</div>&lt;!&ndash; /.modal-content &ndash;&gt;-->
	<!--</div>&lt;!&ndash; /.modal-dialog &ndash;&gt;-->
<!--</div>&lt;!&ndash; /.modal &ndash;&gt;-->
</body>
<script>

	$("#login").submit(function () {
		$("#submit").button('loading')

		var username = $("#userName").val();
		var password = $("#password").val();
		$.ajax({
			url: "/login",
			data: {username: username,password:password},
			type: "POST",
			dataType: "json",
			success: function(data) {
				// data = jQuery.parseJSON(data);  //dataType指明了返回数据为json类型，故不需要再反序列化
				$("#submit").button('reset')
				console.log(data)
				if(data.code != "200"){
					$("#errorMsg").html(data.msg)
					$('#errorMsg').show(300)
				}else{
					$('#errorMsg').hide(300)
					sessionStorage.setItem("age",data.result.age)
					sessionStorage.setItem("gender",data.result.gender)
					sessionStorage.setItem("id",data.result.id)
					sessionStorage.setItem("img",data.result.img)
					sessionStorage.setItem("name",data.result.name)
					sessionStorage.setItem("userName",data.result.userName)
					window.location.href = "/index.html"
				}
			}
		})

		return false;
	})
</script>
</html>
